(()=>{"use strict";class e{constructor(){this.resetBtn=document.querySelector(".forgot-btn")}getInput(){return{email:document.getElementById("email").value}}updateUI(){const e=document.querySelector(".forgot-btn"),t=document.querySelector(".loader");e.classList.add("hidden"),t.classList.remove("hidden")}defaultUI(){const e=document.querySelector(".forgot-btn"),t=document.querySelector(".loader");e.classList.remove("hidden"),t.classList.add("hidden")}resetPassword(e){this.resetBtn.addEventListener("click",(async()=>{this.updateUI();const t=this.getInput();await e(t),this.defaultUI()}))}}const t="https://api.softdownloads.net",n="https://naturist.sgp1.digitaloceanspaces.com/";let o={};const a=async(e,n,o)=>{const a={method:n,credentials:"include",headers:{"Content-Type":"application/json"}};o&&(a.body=JSON.stringify(o));try{const n=await fetch(`${t}${e}`,a);return await n.json()}catch(e){throw e}};class s{constructor(){}showPopup(e){const t=document.querySelector(".popup");t.textContent=e,t.style.opacity="1",t.style.zIndex="100"}hidePopup(){setTimeout((()=>{const e=document.querySelector(".popup");e.style.opacity="0",setTimeout((()=>{e.style.zIndex="-10"}),500)}),3e3)}}class i{constructor(){this.bg=document.querySelector(".bg"),this.container=document.querySelector(".container")}showSpinner(){this.bg.classList.remove("hidden"),this.container.style.filter="blur(2px)"}hideSpinner(){this.bg.classList.add("hidden"),this.container.style.filter="blur(0px)"}}const r=new s,c=async e=>{try{const t=await a("/api/user/forgot-password","POST",e);r.showPopup(t.message),r.hidePopup()}catch(e){console.log(e)}};class d{constructor(){this.resetBtn=document.querySelector(".reset-btn")}getInput(){const e=document.querySelector("[name='new-password']").value,t=document.querySelector("[name='confirm-new-password']").value;return{password:e.toString(),confirmPassword:t.toString()}}updateUI(){const e=document.querySelector(".reset-btn"),t=document.querySelector(".loader");e.classList.add("hidden"),t.classList.remove("hidden")}defaultUI(){const e=document.querySelector(".reset-btn"),t=document.querySelector(".loader");e.classList.remove("hidden"),t.classList.add("hidden")}resetPassword(e){const t=window.location.search.split("=")[1];if(!t)return window.location.href="/";this.resetBtn.addEventListener("click",(async()=>{try{this.updateUI();const n=this.getInput();if(n.password!==n.confirmPassword)return popup.showPopup("Passwords do not match"),popup.hidePopup(),void this.defaultUI();await e(n,t),this.defaultUI()}catch(e){}}))}}const l=new i,u=new s,p=async e=>{try{await a("/api/user/logout","GET"),e.defaultUI(),window.location.href="/",l.hideSpinner()}catch(e){console.log(e)}},m=async e=>{try{e.updateUI();const t=e.getInputs(),n=await a("/api/user/signup","POST",t);n.data?u.showPopup(n.data.message):u.showPopup(n.message),e.resetInput(),u.hidePopup(),e.defaultUI()}catch(e){console.log(e)}},h=new i;class w{constructor(){this.navBarList=document.querySelector(".list")}updateUI(e){const t=document.querySelector(".user-not-loggedin"),o=document.querySelector(".user-loggedin"),a=document.querySelector(".user-name");t.classList.add("hidden"),o.classList.remove("hidden");const s=document.querySelector(".user-image");a.innerText=`Welcome, ${e.data.user.name.split(" ")[0]}`,s.src=`${n}${e.data.user.photo}`,h.hideSpinner()}defaultUI(){const e=document.querySelector(".user-not-loggedin"),t=document.querySelector(".user-loggedin");e.classList.remove("hidden"),t.classList.add("hidden")}}const g=new s,v=async(e,t)=>{try{const n=await a(`/api/user/reset-password?token=${t}`,"POST",e);if("Fail"===n.status)g.showPopup(n.message),g.hidePopup();else{g.showPopup(n.message),g.hidePopup();const e=new w;setTimeout((()=>{p(e)}),1e3)}}catch(e){console.log(e)}};class y{constructor(){this.passwordUpdateBtn=document.querySelector(".password-save-btn"),this.logoutBtn=document.querySelector(".log-out-btn"),this.nameUpdateBtn=document.querySelector(".name-save-btn"),this.emailUpdateBtn=document.querySelector(".email-save-btn"),this.bookmarkBtn=document.querySelector(".bookmark-btn"),this.photoUpdateBtn=document.querySelector(".photo-save-btn")}setInput(e){document.getElementById("account-name").value=e.data.user.name,document.getElementById("account-email").value=e.data.user.email,document.querySelector(".account-photo img").src=`${n}${e.data.user.photo}`}getPasswordInput(){return{currentPassword:document.getElementById("current-password").value,newPassword:document.getElementById("new-password").value,confirmNewPassword:document.getElementById("confirm-new-password").value}}getNameInput(){return{name:document.getElementById("account-name").value}}getEmailInput(){return{email:document.getElementById("account-email").value}}resetInput(){document.getElementById("current-password").value="",document.getElementById("new-password").value="",document.getElementById("confirm-new-password").value=""}updatePasswordBtnUI(){this.passwordUpdateBtn.textContent="Updating..."}resetPasswordBtnUI(){this.passwordUpdateBtn.textContent="Update Password"}updateNameBtnUI(){this.nameUpdateBtn.textContent="Updating..."}resetNameBtnUI(){this.nameUpdateBtn.textContent="Update Name"}updateEmailBtnUI(){this.emailUpdateBtn.textContent="Updating..."}resetEmailBtnUI(){this.emailUpdateBtn.textContent="Update Email"}updatePhotoBtnUI(){this.photoUpdateBtn.textContent="Updating..."}resetPhotoBtnUI(){this.photoUpdateBtn.textContent="Update Photo"}getImageFile(){const e=document.getElementById("photo"),[t]=e.files;return t}imagePreview(){document.getElementById("photo").addEventListener("change",(()=>{const e=this.getImageFile();document.querySelector(".account-photo img").src=URL.createObjectURL(e)}))}updateData(e,t,n,o,a,s){this.passwordUpdateBtn.addEventListener("click",(t=>{t.preventDefault(),e(s)})),this.nameUpdateBtn.addEventListener("click",(e=>{e.preventDefault(),t(s)})),this.emailUpdateBtn.addEventListener("click",(e=>{e.preventDefault(),n(s)})),this.logoutBtn.addEventListener("click",(async()=>{const e=new w;await a(e)})),this.bookmarkBtn.addEventListener("click",(()=>{window.location.href="/my-bookings.html"})),this.photoUpdateBtn.addEventListener("click",(e=>{e.preventDefault(),o(s)}))}}const f=new i;let S=!1;const I=async e=>{try{e.updatePasswordBtnUI();const t=e.getPasswordInput();await(async e=>{try{const t=await a("/api/user/update-me/password","POST",e);u.showPopup(t.message),u.hidePopup()}catch(e){console.log(e)}})(t),e.resetPasswordBtnUI()}catch(e){console.log(e)}},k=async e=>{try{e.updateNameBtnUI();const t=e.getNameInput();await(async e=>{try{const t=await a("/api/user/update-me/info","POST",e);u.showPopup(t.message),u.hidePopup()}catch(e){console.log(e)}})(t),e.resetNameBtnUI()}catch(e){console.log(e)}},b=async e=>{try{e.updateEmailBtnUI();const t=e.getEmailInput();await(async e=>{try{const t=await a("/api/user/update-me/email","POST",e);u.showPopup(t.message),u.hidePopup()}catch(e){console.log(e)}})(t),e.resetEmailBtnUI()}catch(e){console.log(e)}},B=async e=>{try{e.updatePhotoBtnUI();const n=e.getImageFile(),o=new FormData;o.append("photo",n),await(async e=>{try{const n=await fetch(`${t}/api/user/update-me/photo`,{method:"POST",body:e,credentials:"include"}),o=await n.json();u.showPopup(o.message),u.hidePopup()}catch(e){console.log(e)}})(o),e.resetPhotoBtnUI()}catch(e){console.log(e)}};class L{constructor(){this.loginBtn=document.querySelector(".login-btn")}getLoginInputs(){return{email:document.getElementById("email").value,password:document.getElementById("password").value}}updateUI(){const e=document.querySelector(".login-btn-text"),t=document.querySelector(".loader");e.classList.add("hidden"),t.classList.remove("hidden")}defaultUI(){const e=document.querySelector(".login-btn-text"),t=document.querySelector(".loader");e.classList.remove("hidden"),t.classList.add("hidden")}resetInput(){document.getElementById("password").value=""}login(){this.loginBtn.addEventListener("click",(()=>{(async e=>{try{e.updateUI();const t=e.getLoginInputs(),n=await a("/api/user/login","POST",t);if(n.data&&(u.showPopup(n.message),setTimeout((()=>{window.location.href=`/2fa.html?token=${n.data}`}),2e3)),"Fail"===n.status)e.defaultUI(),e.resetInput(),u.showPopup(n.message),u.hidePopup();else{const t=await a("/api/user/about-me","GET");window.sessionStorage.setItem("user",JSON.stringify(t)),window.sessionStorage.setItem("isUserLoggedIn",!0),e.defaultUI(),window.location.href="/"}}catch(e){console.log(e)}})(this)}))}}const U=new s,P=new i,q=()=>window.location.search.split("&").map((e=>e.replace("?",""))).filter((e=>e.includes("page="))).join("").split("=")[1];class ${constructor(){this.tourContainer=document.querySelector(".tour-container"),this.loadMoreBtn=document.querySelector(".load-more")}generateMarkup(e){const t=` <div class="tour">\n    <div class="tour-header">\n      <span class="image-overlay"></span>\n      <img src="${n}${e.headImg}" alt="" class="tour-img">\n    </div>\n    <div class="tour-content">\n      <p class="tour-title">${e.name}</p>\n      <p class="tour-content-fact">${e.difficulty.toUpperCase()} ${e.tourLength} Days </p>\n      <p class="tour-content-info">${e.info}\n      </p>\n      <div class="tour-icons">\n        <div class="tour-content-icon">\n          <i class="far fa-map"></i>\n          <p>${e.location}</p>\n        </div>\n        <div class="tour-content-icon">\n          <i class="far fa-calendar"></i>\n          <p>June 2022</p>\n        </div>\n        <div class="tour-content-icon">\n          <i class="far fa-user"></i>\n          <p>${e.groupSize}</p>\n        </div>\n        <div class="tour-content-icon">\n          <i class="far fa-hourglass"></i>\n          <p>${e.tourLength}</p>\n        </div>\n      </div>\n    </div>\n    <div class="tour-footer">\n      <div class="tour-ratings">\n        <p class="tour-price">$${e.price} <span>per person</span></p>\n        <div class="tour-rating">${e.averageRatings} <span>rating (${e.totalRatings})</span></div>\n      </div>\n      <div class="tour-btn">\n        <a href="/tour-detail.html?id=${e._id}" class="tour-link">Details</a>\n      </div>\n    </div>\n  </div>`;this.tourContainer.insertAdjacentHTML("beforeend",t)}resetContainer(){this.tourContainer.innerHTML=""}updateUIForLoadBtn(){const e=document.querySelector(".load-more-text"),t=document.querySelector(".loader");e.classList.add("hidden"),t.classList.remove("hidden")}resetUIForLoadBtn(){const e=document.querySelector(".load-more-text"),t=document.querySelector(".loader");e.classList.remove("hidden"),t.classList.add("hidden")}showMarkup(e){e.data.tours.forEach((e=>{this.generateMarkup(e)}))}loadMoreItems(e,t){q(),this.loadMoreBtn.addEventListener("click",(async()=>{try{this.updateUIForLoadBtn(),t.loadMoreBtn.dataset.page++;const n=t.loadMoreBtn.dataset.page,o=await e(`/api/tour?page=${n||1}&limit=3`,"GET");this.showMarkup(o),this.resetUIForLoadBtn()}catch(e){}}))}getSearchInput(){return document.querySelector(".search-input").value}addSearchListener(e){const t=document.querySelector(".search-input"),n=new i;t.addEventListener("keyup",(async t=>{if(13==t.keyCode){n.showSpinner();const t=this.getSearchInput();await e(t),n.hideSpinner()}})),document.querySelector(".search-label").addEventListener("click",(async()=>{n.showSpinner();const t=this.getSearchInput();await e(t),n.hideSpinner()}))}}const E=new s,T=async e=>{try{const t=await a(`/api/tour?search=${e}`);if(0==t.result)return E.showPopup("No tour found"),void E.hidePopup();const n=new $;n.resetContainer(),n.showMarkup(t)}catch(e){console.log(e)}};class x{constructor(){this.signupbtn=document.querySelector(".signup-btn")}getInputs(){return{email:document.getElementById("email").value,password:document.getElementById("password").value,confirmPassword:document.getElementById("confirm-password").value,name:document.getElementById("name").value}}resetInput(){document.getElementById("password").value="",document.getElementById("confirm-password").value=""}updateUI(){const e=document.querySelector(".signup-btn-text"),t=document.querySelector(".loader");e.classList.add("hidden"),t.classList.remove("hidden")}defaultUI(){const e=document.querySelector(".signup-btn-text"),t=document.querySelector(".loader");e.classList.remove("hidden"),t.classList.add("hidden")}signUpEvent(e){this.signupbtn.addEventListener("click",(()=>{e(this)}))}}const C=async e=>{try{const t=await a(`/api/checkout/checkout-session/${e}`,"GET"),n={order_id:t.order.id,key:"rzp_test_iQXxC9LBZRPfH9",prefill:{name:t.order.notes.name,email:t.order.notes.email},handler(){window.location.href="/my-bookings.html?success=true"}};document.querySelector(".book-tour-btn").textContent="Book Tour Now",new Razorpay(n).open()}catch(e){console.log(e)}},M=new s,F=new class{constructor(){this.tourContainer=document.querySelector(".tour-container")}addOrRemove(){return document.querySelector(".bookmark-icon").classList.contains("added")}generateMarkup(e,t){const o=e.reviews.length,a=`<div class="tour">\n        <i class="${t?"fas added":"far"} fa-bookmark bookmark-icon"></i>\n        <div class="tour-info">\n        <div class="tour-detail-title">\n        <span>${e.name.toUpperCase()}</span>\n\n        </div>\n            <div class="tour-info-details">\n                <div class="tour-info-detail">\n                    <i class="far fa-clock"></i>\n                    <p>${e.tourLength} Days</p>\n                </div>\n                <div class="tour-info-detail">\n                    <i class="far fa-map"></i>\n                    <p>${e.location}</p>\n                </div>\n            </div>\n        </div>\n      </div>\n      <div class="tour-facts">\n        <div class="tour-facts-left">\n          <p class="tour-quick-facts">Quick Facts</p>\n          <div class="tour-facts-items">\n            <div class="tour-facts-item">\n              <i class="far fa-calendar-minus"></i>\n              <span>Next Date</span>\n              <p>June 2021</p>\n            </div>\n            <div class="tour-facts-item">\n              <i class="far fa-chart-bar"></i>\n              <span>Difficulty</span>\n              <p>${e.difficulty.toUpperCase()}</p>\n            </div>\n            <div class="tour-facts-item">\n              <i class="far fa-user"></i>\n              <span>Group Size</span>\n              <p>6</p>\n            </div>\n            <div class="tour-facts-item">\n              <i class="far fa-star"></i>\n              <span>Ratings</span>\n              <p>${e.averageRatings} / ${e.totalRatings}</p>\n            </div>\n          </div>\n        </div>\n        <div class="tour-facts-right">\n          <p class="tour-quick-facts">About ${e.name.split(" ").map((e=>`${e[0].toUpperCase()}${e.slice(1)}`)).join(" ")}</p>\n          <p class="tour-description">\n          ${e.info}\n          </p>\n          <p class="tour-description">\n                ${e.description}\n          </p>\n        </div>\n    </div>\n   \n    <div class="tour-images">\n      <img src="${e.images[0]}" alt="">\n      <img src="${e.images[1]}" alt="">\n      <img src="${e.images[2]}" alt="">\n    </div>\n    \n    <div class="tour-review">\n      \n    </div>\n    <div class="booking-section">\n    <div class="booking-container">\n    <img src="${n}${e.headImg}" alt="">\n  <div class="booking">\n    <h1 class="booking-text">WHAT ARE YOU WAITING FOR?</h1>\n    <p>7 days. 1 adventure. Infinite memories. Make it yours today!</p>\n  </div>\n  <button class="book-tour-btn" data-tour-id="${e._id}"> Book Tour Now </button>\n  </div>\n</div>\n    `;if(this.tourContainer.innerHTML="",this.tourContainer.insertAdjacentHTML("afterbegin",a),0==o){const e=document.querySelector(".tour-review");e.style.padding="0rem",e.style.marginTop="0"}if(document.querySelector(".tour").style.backgroundImage=`linear-gradient(\n      rgba(22, 160, 132, 0.8),\n      rgba(46, 204, 112, 0.8)\n    ), url("${n}${e.headImg}")`,0!=o){const t=document.querySelector(".tour-review"),o=e.reviews.map((e=>{const t=[];for(let n=0;n<e.rating;n++)t.push('<i class="material-icons">star</i>');return`<div class="review">\n        <div class="review-info">\n          <img src="${n}${e.user.profilePhoto}" alt="reviewer-img">\n          <p class="reviewer-name">${e.user.name}</p>\n        </div>\n        <p class="review-text">${e.review}</p>\n        <div class="review-ratings">\n          ${t.join("")}\n        </div>\n      </div>`}));t.innerHTML=o.join("")}}addToBookmark(e,t){document.querySelector(".fa-bookmark").addEventListener("click",(function(){e(t)}))}updateBookmarkUI(e){"spinner"===e?document.querySelector(".bookmark-icon").className="fas fa-spinner fa-spin bookmark-icon":"added"===e?document.querySelector(".bookmark-icon").className="fas added fa-bookmark bookmark-icon":"removed"===e&&(document.querySelector(".bookmark-icon").className="far fa-bookmark bookmark-icon")}getBookBtn(){return document.querySelector(".book-tour-btn")}bookingHandler(e){const t=document.querySelector(".book-tour-btn");t.addEventListener("click",(async()=>{t.textContent="Processing...","Fail"==(await e("/api/user/about-me","GET")).status&&(window.location.href="/login.html");const n=window.location.search.split("=")[1];await C(n)}))}addImagePopup(){const e=document.querySelector(".tour-images"),t=document.querySelector(".image-popup"),n=document.querySelector(".image-popup-container img");e.addEventListener("click",(e=>{if(!e.target.src)return;const o=e.target.src;n.src=o,t.classList.remove("hidden")})),t.addEventListener("click",(function(){this.classList.add("hidden")}))}},N=new i,O=async e=>{try{const t=F.addOrRemove();F.updateBookmarkUI("spinner");const n=await a("/api/bookmark",t?"DELETE":"POST",{tourId:e});"Fail"===n.status&&(M.showPopup(n.message),F.updateBookmarkUI("removed")),"success"===n.status?F.updateBookmarkUI("added"):n.status||F.updateBookmarkUI("removed"),M.hidePopup()}catch(e){console.log(e)}},R=new class{constructor(){this.otpBtn=document.querySelector(".login-btn")}getInput(){return{OTP:document.getElementById("email").value}}getToken(){return window.location.search.split("=")[1]}twoFA(e){const t=this.getToken();if(!t)return window.location.href="/login.html";this.otpBtn.addEventListener("click",(async()=>{await e(t)}))}updateUI(){const e=document.querySelector(".login-btn-text"),t=document.querySelector(".loader");e.classList.add("hidden"),t.classList.remove("hidden")}defaultUI(){const e=document.querySelector(".login-btn-text"),t=document.querySelector(".loader");e.classList.remove("hidden"),t.classList.add("hidden")}},D=new s,G=async e=>{try{R.updateUI();const t=R.getInput(),n=await a(`/api/user/2fa?token=${e}`,"POST",t);"success"===n.status?(D.showPopup("Logged in successfully!"),D.hidePopup(),window.sessionStorage.setItem("isUserLoggedIn",!0),setTimeout((()=>{window.location.href="/index.html"}),1700)):(D.showPopup(n.message),D.hidePopup()),R.defaultUI()}catch(e){console.log(e)}};class A{constructor(){this.container=document.querySelector(".tour-container")}showBookings(e){const t=` <div class="tour">\n    <div class="tour-header">\n      <span class="image-overlay"></span>\n      <img src="${n}${e.headImg}" alt="" class="tour-img">\n    </div>\n    <div class="tour-content">\n      <p class="tour-title">${e.name}</p>\n      <p class="tour-content-fact">${e.difficulty.toUpperCase()} ${e.tourLength} Days </p>\n      <p class="tour-content-info">${e.info}\n      </p>\n      <div class="tour-icons">\n        <div class="tour-content-icon">\n          <i class="far fa-map"></i>\n          <p>${e.location}</p>\n        </div>\n        <div class="tour-content-icon">\n          <i class="far fa-calendar"></i>\n          <p>June 2022</p>\n        </div>\n        <div class="tour-content-icon">\n          <i class="far fa-user"></i>\n          <p>${e.groupSize}</p>\n        </div>\n        <div class="tour-content-icon">\n          <i class="far fa-hourglass"></i>\n          <p>${e.tourLength}</p>\n        </div>\n      </div>\n    </div>\n    <div class="tour-footer">\n      <div class="tour-ratings">\n        <p class="tour-price">$${e.price} <span>per person</span></p>\n        <div class="tour-rating">${e.averageRatings} <span>rating (${e.totalRatings})</span></div>\n      </div>\n      <div class="tour-btn">\n      <button data-id="${e._id}" class="tour-link">Invoice</button>\n      </div>\n    </div>\n  </div>`;this.container.insertAdjacentHTML("beforeend",t)}downloadInvoiceListener(e){document.querySelector(".tour-container").addEventListener("click",(async t=>{if(!t.target.classList.contains("tour-link"))return;const n=t.target.dataset.id;await e(n)}))}}const j=async e=>{try{const t=await a(`/api/tour/${e}/invoice`),n=new s;"Fail"===t.status&&(n.showPopup(t.message),n.hidePopup()),window.open(t.data.invoice)}catch(e){console.log(e)}},H=document.querySelector(".bars"),_=document.querySelectorAll(".list"),z=new i;(async()=>{try{z.showSpinner(),await(async()=>{try{const e=await a("/api/user/about-me","GET");"success"===e.status?((new w).updateUI(e),S=!0,o=e):(S=!1,f.hideSpinner())}catch(e){S=!1,console.log(e)}})(),"/activate-account.html"!==window.location.href&&H.addEventListener("click",(function(){_.forEach((e=>{e.classList.toggle("slide")}))})),(async()=>{try{if("/activate-account.html"===window.location.pathname){console.log("hi");const e=window.location.search.split("=")[1];if(!e)return window.location.href="/";const t=await a(`/api/user/activate-account?verify=${e}`,"GET");"success"===t.status?window.location.href="/login.html?activated=true":document.write(t.message)}}catch(e){console.log(e)}})(),(async()=>{try{if("/tours.html"==window.location.pathname){const e=new i,t=q(),n=3;e.showSpinner();const o=new $;o.loadMoreItems(a,o);const s=await a(`/api/tour?page=${t||1}&limit=${n}`,"GET");o.showMarkup(s),o.addSearchListener(T),e.hideSpinner()}}catch(e){console.log(e)}})(),(async()=>{try{if("/my-bookings.html"===window.location.pathname){if("?success=true"==window.location.search){const e=new s;e.showPopup("Tour has been added to your bookings"),e.hidePopup(),setTimeout((()=>{window.history.replaceState("","","/my-bookings.html")}),2e3)}const e=new i;e.showSpinner();const t=await a("/api/booking","GET");if("Fail"==t.status)return popup.showPopup("Something went wrong!");const n=new A;t.data.bookings.forEach((e=>{n.showBookings(e.tour)})),n.downloadInvoiceListener(j),e.hideSpinner()}}catch(e){console.log(e)}})(),(async()=>{try{if("/tour-detail.html"==window.location.pathname){const e=window.location.search.split("=")[1];if(!e)return window.location.href="/tours.html";N.showSpinner(),await(async(e,t)=>{try{const n=await a(`/api/tour/${e}`,"GET"),o=await a("/api/bookmark","GET");let s=!1;"Fail"!==o.status&&(s=o.bookmarks.some((e=>e._id==n.data.tour._id))),t.generateMarkup(n.data.tour,s),N.hideSpinner()}catch(e){N.hideSpinner(),console.log(e)}})(e,F),await F.addToBookmark(O,e),F.bookingHandler(a),F.addImagePopup()}}catch(e){console.log(e)}})(),(()=>{if("/forgot-password.html"==window.location.pathname){const t=new i;t.showSpinner(),(new e).resetPassword(c),t.hideSpinner()}})(),(()=>{if("/reset-password.html"===window.location.pathname){const e=new i;(new d).resetPassword(v),e.hideSpinner()}})(),(()=>{if("/dashboard.html"==window.location.pathname){const e=new i;if(e.showSpinner(),!S)return window.location.href="/login.html?notLoggedIn=true";const t=new y;t.setInput(o),t.imagePreview(),t.updateData(I,k,b,B,p,t),e.hideSpinner()}})(),"/login.html"===window.location.pathname&&"?activated=true"===window.location.search&&setTimeout((()=>{U.showPopup("Account verified"),U.hidePopup(),window.history.pushState("","","/login.html")}),500),"/login.html"==window.location.pathname&&(P.showSpinner(),(new L).login(),P.hideSpinner()),"/login.html"==window.location.pathname&&"?notLoggedIn=true"===window.location.search&&setTimeout((()=>{U.showPopup("You are not logged in! Please log in."),U.hidePopup()}),500),"/signup.html"==window.location.pathname&&(new x).signUpEvent(m),(()=>{if("/update-email.html"===window.location.pathname){(new i).hideSpinner();const e=window.location.search.split("=")[1];if(!e)return window.location.href="/";(async e=>{try{const t=await a(`/api/user/update-email?token=${e}`,"GET");"success"==t.status?window.location.href="/":"Fail"===t.status&&document.write("Invalid token or expired!")}catch(e){console.log(e)}})(e)}})(),"/2fa.html"==window.location.pathname&&R.twoFA(G),(()=>{if("/error.html"===window.location.pathname){const e=window.location.search.split("=")[1].replaceAll("%20"," "),t=new i;t.showSpinner(),document.querySelector(".error-message").innerText=e,t.hideSpinner()}})(),z.hideSpinner()}catch(e){console.log(e)}})()})();