(()=>{"use strict";const e=async(e,t,n)=>{const o={method:t,headers:{"Content-Type":"application/json"},credentials:"include"};n&&(o.body=JSON.stringify(n));try{const t=await fetch(`https://naturist.herokuapp.com${e}`,o),n=await t.json();return console.log(n),n}catch(e){console.log(e)}},t=new class{constructor(){this.loginBtn=document.querySelector(".login-btn")}getLoginInputs(){return{email:document.getElementById("email").value,password:document.getElementById("password").value}}updateUI(){const e=document.querySelector(".login-btn-text"),t=document.querySelector(".loader");e.classList.add("hidden"),t.classList.remove("hidden")}defaultUI(){const e=document.querySelector(".login-btn-text"),t=document.querySelector(".loader");e.classList.remove("hidden"),t.classList.add("hidden")}},n=new class{constructor(){this.navBarList=document.querySelector(".list")}updateUI(e){const t=document.querySelector(".user-not-loggedin"),n=document.querySelector(".user-loggedin");document.querySelector(".user-name").innerText=`Welcome, ${e.data.user.name.split(" ")[0]}`,t.classList.add("hidden"),n.classList.remove("hidden")}defaultUI(){const e=document.querySelector(".user-not-loggedin"),t=document.querySelector(".user-loggedin");e.classList.remove("hidden"),t.classList.add("hidden")}getlogoutBtn(){const e=document.querySelector(".logout-btn");if(e)return e}},o=new class{constructor(){this.bg=document.querySelector(".bg")}showSpinner(){this.bg.classList.remove("hidden")}hideSpinner(){this.bg.classList.add("hidden")}},s=async()=>{try{const n=t.getLoginInputs();t.updateUI();const o=await e("/api/user/login","POST",n);"Fail"===o.status&&(t.defaultUI(),console.log(o.message)),t.defaultUI(),window.location.href="/"}catch(e){console.log(e)}},c=async()=>{console.log("logging out");try{o.showSpinner(),await e("/api/user/logout","GET"),n.defaultUI(),o.hideSpinner()}catch(e){console.log(e)}};(async()=>{try{o.showSpinner(),t.loginBtn&&t.loginBtn.addEventListener("click",s),await(async()=>{try{const t=await e("/api/user/about-me","GET");"success"===t.status&&(n.updateUI(t),o.hideSpinner()),o.hideSpinner()}catch(e){console.log(e)}})(),n.getlogoutBtn().addEventListener("click",c)}catch(e){console.log(e)}})()})();